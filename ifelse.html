<html>

    <head>
        <title>If-Else in JavaScript</title>
        <link rel="stylesheet" href="style.css">
        <style>
#bug {
    opacity: 0;
    transition-duration: 0.75s;
}
        </style>
    </head>

    <body>
        
        <div id="left-explanation">
            <h1 style="margin: 0px;">If-Else</h1>
            <p>In this tutorial you'll learn about conditional statements in JavaScripts.</p>

            <h2>Explanation</h2>
            <p>Conditional statements allow you to do different thing based on whether a condition is true.</p>

            <h3>Syntax</h3>
            <p>The general syntax of an if statement is like this:</p>

            <pre><code>if(condition) {
    statement;
}</code></pre>

            <p>If <code>condition</code> is <code>true</code>, <code>statement</code> will be run. It's quite simple.</p>

            <h3>Else statements</h3>
            <p>If statements also have an extension, <code>else</code>. The code in the <code>else</code> statement if the code in the <code>if</code> statement <b>isn't</b> executed.</p>

            <h2>Task</h2>
            <p>Read input from the user with <code>prompt</code>. If the input is greater than 7, print the number. Otherwise, print the number plus five.</p>

            <h2>Instructions</h2>
            <ol>
                <li>Write your code.</li>
                <li>Click the Run Code button.</li>
                <li>I'll tell you if you got it right.</li>
            </ol>

            <div id="bug">
                <h2>Bug</h2>
                <p>When you added 5, you might have noticed that instead of adding it arithmetically, JS just tacked the 5 onto the number. This is because <code>prompt</code> returns a string. Addition on a string and a number will simply concatenate the two.</p>
                <pre><code>2 + 2 = 4
    "2" + 2 = "22"
    "2" - 2 = 0
    "stuff" - 2 = NaN</code></pre>

                <p>This is one of the many oddities from JS.</p>
            </div>
        </div>

        <div id="right-editor">
        
            <textarea id="codearea" cols="80" rows="25" placeholder="Code goes here..."></textarea><br>
            <textarea id="resultarea" cols="80" rows="5" placeholder="Result shows up here..." readonly></textarea><br>
            <button onClick="runCode()">Run Code</button>
            <p id="resulttext"></p>
        
        </div>

        <script>

let codeArea = document.getElementById("codearea");
let resultArea = document.getElementById("resultarea");
let resultText = document.getElementById("resulttext");

/* Hooked console.log writes to this */
let results;
let gResult = 0;

function runCode() {

    /* Get code. */
    let code = codeArea.value;

    /* Reset results. */
    results = [];
    resultArea.value = "";

    /* Hook into console.log */
    console.oldLog = console.log;
    console.log = function(value) {
        results.push(value);
        resultArea.value += value + "\n";
    }

    /* Run code, 1st pass (just for show) */
    try {
        
        /* Evaluate the code. */
        eval(code);

    } catch(exception) {

        /* Exception, exit early. */
        resultArea.value = exception;    
        resultText.innerHTML = "Your code had an error. Try again.";
        return;
    
    }

    /* Check if user printed. */
    if(results.length == 0) {
        console.log("You didn't print anything.");
        return;
    } 

    /* Hook prompt() and rerun code */
    console.log = function(value) {
        gResult = value;
    }
    let oldPrompt = prompt;
    let value = Math.random() * 20;
    prompt = function() { return value; }

    /* Rerun code */
    try {
        eval(code);
    } catch(exception) {

        /* Exception, exit early. */
        resultArea.value = exception;    
        resultText.innerHTML = "Your code had an error. Try again.";
        return;
    
    }

    /* Verify output */
    if(results.length == 0) {
        resultText.innerHTML = "You didn't print anything...";
    } else {

        /* Verify line 1. */
        if(value > 7 && gResult == value || value < 7 && gResult == value + 5) {
            resultText.innerHTML = "Good job!";

            /* Unhide bug. */
            document.getElementById("bug").style.opacity = "1";
        } else {
            resultText.innerHTML = "No.";
        }

    }

}

        </script>
    
    </body>

</html>